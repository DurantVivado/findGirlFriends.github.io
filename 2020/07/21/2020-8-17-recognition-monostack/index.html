

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=&quot;auto&quot;>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" type="image/png" href="/img/favicon.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="åšä¸»ï¼šæ¥è‡ªåä¸­ç§‘æŠ€å¤§å­¦å›½å®¶å…‰ç”µç ”ç©¶ä¸­å¿ƒçš„">
  <meta name="author" content="Durant">
  <meta name="keywords" content="">
  <title>çº¢å°˜å®¢æ ˆä¹‹å•è°ƒæ ˆ - Durant Thorvalds çš„ç±³å¥‡å¦™å¦™å±‹</title>

  <link  rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.4.1/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.staticfile.org/github-markdown-css/4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.staticfile.org/highlight.js/10.0.0/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.staticfile.org/gitalk/1.6.2/gitalk.css" />
  


<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_pf9vaxs7x7b.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- è‡ªå®šä¹‰æ ·å¼ä¿æŒåœ¨æœ€åº•éƒ¨ -->


  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/atom.xml" title="Durant Thorvalds çš„ç±³å¥‡å¦™å¦™å±‹" type="application/atom+xml">
</head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>Fluid</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                é¦–é¡µ
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                æ ‡ç­¾
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                è”ç³»æˆ‘
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                å½’æ¡£
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                åˆ†ç±»
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                å‹é“¾
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;</a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" href="javascript:">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner intro-2" id="background" parallax=true
         style="background: url('/img/default.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="container page-header text-center fade-in-up">
            <span class="h2" id="subtitle">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2020-07-21 00:00" pubdate>
        2020å¹´7æœˆ21æ—¥ å‡Œæ™¨
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      1.6k å­—
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      19
       åˆ†é’Ÿ
    </span>
  

  
  
    
      <!-- ä¸è’œå­ç»Ÿè®¡æ–‡ç« PV -->
      <span id="busuanzi_container_page_pv" style="display: none">
        <i class="iconfont icon-eye" aria-hidden="true"></i>
        <span id="busuanzi_value_page_pv"></span> æ¬¡
      </span>
    
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid">
  <div class="row">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-md">
      <div class="container nopadding-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto" id="post">
            <!-- SEO header -->
            <h1 style="display: none">çº¢å°˜å®¢æ ˆä¹‹å•è°ƒæ ˆ</h1>
            
            <div class="markdown-body" id="post-body">
              <h1 id="ç‚«é…·skrçš„å•è°ƒæ ˆ"><a href="#ç‚«é…·skrçš„å•è°ƒæ ˆ" class="headerlink" title="ç‚«é…·skrçš„å•è°ƒæ ˆ"></a>ç‚«é…·skrçš„å•è°ƒæ ˆ</h1><ul>
<li><ol>
<li><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/largest-rectangle-in-histogram/">æŸ±çŠ¶å›¾ä¸­æœ€å¤§çŸ©å½¢ï¼ˆHardï¼‰</a></li>
</ol>
</li>
<li><p>85.<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/maximal-rectangle/">æ±‚æœ€å¤§çŸ©å½¢(Hard)</a></p>
</li>
<li><p>739.<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/daily-temperatures/">æ¯æ—¥æ¸©åº¦(Medium)</a></p>
</li>
<li><h4 id="402-ç§»æ‰Kä½æ•°å­—"><a href="#402-ç§»æ‰Kä½æ•°å­—" class="headerlink" title="402. ç§»æ‰Kä½æ•°å­—"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/remove-k-digits/">402. ç§»æ‰Kä½æ•°å­—</a></h4></li>
<li><p><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/create-maximum-number/">321. æ‹¼æ¥æœ€å¤§æ•°ï¼ˆHardï¼‰</a></p>
</li>
<li><p>å¤šé‡èƒŒåŒ…é—®é¢˜IIIã€è¯¦è§èƒŒåŒ…ä¹è®²ã€‘</p>
</li>
</ul>
<blockquote>
<p>æ¨èé˜…è¯»ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/lucky52529/article/details/89155694">https://blog.csdn.net/lucky52529/article/details/89155694</a></p>
</blockquote>
<h3 id="æ¨¡æ‹Ÿå•è°ƒæ ˆçš„æ•°æ®pushå’Œpop"><a href="#æ¨¡æ‹Ÿå•è°ƒæ ˆçš„æ•°æ®pushå’Œpop" class="headerlink" title="æ¨¡æ‹Ÿå•è°ƒæ ˆçš„æ•°æ®pushå’Œpop"></a>æ¨¡æ‹Ÿå•è°ƒæ ˆçš„æ•°æ®pushå’Œpop</h3><blockquote>
<p>æ¨¡æ‹Ÿå®ç°ä¸€ä¸ªé€’å¢å•è°ƒæ ˆï¼š</p>
</blockquote>
<p>ç°åœ¨æœ‰ä¸€ç»„æ•°10ï¼Œ3ï¼Œ7ï¼Œ4ï¼Œ12ã€‚ä»å·¦åˆ°å³ä¾æ¬¡å…¥æ ˆï¼Œåˆ™å¦‚æœ<strong>æ ˆä¸ºç©º</strong>æˆ–<strong>å…¥æ ˆå…ƒç´ å€¼å°äºæ ˆé¡¶å…ƒç´ å€¼</strong>ï¼Œåˆ™å…¥æ ˆï¼›å¦åˆ™ï¼Œå¦‚æœå…¥æ ˆåˆ™ä¼šç ´åæ ˆçš„å•è°ƒæ€§ï¼Œåˆ™éœ€è¦æŠŠæ¯”å…¥æ ˆå…ƒç´ å°çš„å…ƒç´ å…¨éƒ¨å‡ºæ ˆã€‚å•è°ƒé€’å‡çš„æ ˆåä¹‹ã€‚</p>
<ul>
<li>10å…¥æ ˆæ—¶ï¼Œæ ˆä¸ºç©ºï¼Œç›´æ¥å…¥æ ˆï¼Œæ ˆå†…å…ƒç´ ä¸º10ã€‚</li>
<li>3å…¥æ ˆæ—¶ï¼Œæ ˆé¡¶å…ƒç´ 10æ¯”3å¤§ï¼Œåˆ™å…¥æ ˆï¼Œæ ˆå†…å…ƒç´ ä¸º10ï¼Œ3ã€‚</li>
<li>7å…¥æ ˆæ—¶ï¼Œæ ˆé¡¶å…ƒç´ 3æ¯”7å°ï¼Œåˆ™æ ˆé¡¶å…ƒç´ å‡ºæ ˆï¼Œæ­¤æ—¶æ ˆé¡¶å…ƒç´ ä¸º10ï¼Œæ¯”7å¤§ï¼Œåˆ™7å…¥æ ˆï¼Œæ ˆå†…å…ƒç´ ä¸º10ï¼Œ7ã€‚</li>
<li>4å…¥æ ˆæ—¶ï¼Œæ ˆé¡¶å…ƒç´ 7æ¯”4å¤§ï¼Œåˆ™å…¥æ ˆï¼Œæ ˆå†…å…ƒç´ ä¸º10ï¼Œ7ï¼Œ4ã€‚</li>
<li>12å…¥æ ˆæ—¶ï¼Œæ ˆé¡¶å…ƒç´ 4æ¯”12å°ï¼Œ4å‡ºæ ˆï¼Œæ­¤æ—¶æ ˆé¡¶å…ƒç´ ä¸º7ï¼Œä»æ¯”12å°ï¼Œæ ˆé¡¶å…ƒç´ 7ç»§ç»­å‡ºæ ˆï¼Œæ­¤æ—¶æ ˆé¡¶å…ƒç´ ä¸º10ï¼Œä»æ¯”12å°ï¼Œ10å‡ºæ ˆï¼Œæ­¤æ—¶æ ˆä¸ºç©ºï¼Œ12å…¥æ ˆï¼Œæ ˆå†…å…ƒç´ ä¸º12ã€‚</li>
</ul>
<p>ç»†å¿ƒçš„è¯»è€…å¯èƒ½ä¼šé—®ï¼Œæ—¢ç„¶å•è°ƒæ ˆæœ‰ä¸ªå¾ªç¯ï¼ŒåŠ ä¸Šå¤–é¢çš„å¾ªç¯ï¼Œé‚£ä¹ˆæ—¶é—´å¤æ‚åº¦ä¼šä¸ä¼šæ˜¯$O(n^2)$ï¼Ÿ å…¶å®ä¸æ˜¯ï¼Œæ—¶é—´å¤æ‚åº¦ï¼š$O(N)$ã€‚è™½ç„¶å¤–å¾ªç¯é‡Œé¢è¿˜æœ‰ä¸€ä¸ªå†…å¾ªç¯ï¼Œä½†å†…å¾ªç¯çš„æ¬¡æ•°å—æ ˆä¸­å‰©ä½™å…ƒç´ æ€»æ•°çš„é™åˆ¶ï¼Œå› æ­¤æœ€ç»ˆå¤æ‚åº¦ä»ä¸º $O(N)ã€‚$.è¿™ä¸€ç‚¹å¯ä»¥å’Œæ»‘åŠ¨çª—å£è¿›è¡Œç±»æ¯”ã€‚</p>
<h3 id="ä¼˜å…ˆé˜Ÿåˆ—çš„å»¶è¿Ÿåˆ é™¤ç­–ç•¥"><a href="#ä¼˜å…ˆé˜Ÿåˆ—çš„å»¶è¿Ÿåˆ é™¤ç­–ç•¥" class="headerlink" title="ä¼˜å…ˆé˜Ÿåˆ—çš„å»¶è¿Ÿåˆ é™¤ç­–ç•¥"></a>ä¼˜å…ˆé˜Ÿåˆ—çš„å»¶è¿Ÿåˆ é™¤ç­–ç•¥</h3><p>ç„¶è€Œå¯¹äº \texttt{erase(num)}erase(num) è€Œè¨€ï¼Œè®¾è®¡èµ·æ¥å°±ä¸æ˜¯é‚£ä¹ˆå®¹æ˜“äº†ï¼Œå› ä¸ºæˆ‘ä»¬çŸ¥é“ï¼Œä¼˜å…ˆé˜Ÿåˆ—æ˜¯ä¸æ”¯æŒç§»å‡ºéå †é¡¶å…ƒç´ è¿™ä¸€æ“ä½œçš„ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥è€ƒè™‘ä½¿ç”¨ã€Œå»¶è¿Ÿåˆ é™¤ã€çš„æŠ€å·§ï¼Œå³ï¼š</p>
<p>å½“æˆ‘ä»¬éœ€è¦ç§»å‡ºä¼˜å…ˆé˜Ÿåˆ—ä¸­çš„æŸä¸ªå…ƒç´ æ—¶ï¼Œæˆ‘ä»¬åªå°†è¿™ä¸ªåˆ é™¤æ“ä½œã€Œè®°å½•ã€ä¸‹æ¥ï¼Œè€Œä¸å»çœŸçš„åˆ é™¤è¿™ä¸ªå…ƒç´ ã€‚å½“è¿™ä¸ªå…ƒç´ å‡ºç°åœ¨ \textit{small}small æˆ–è€… \textit{large}large çš„å †é¡¶æ—¶ï¼Œæˆ‘ä»¬å†å»å°†å…¶ç§»å‡ºå¯¹åº”çš„ä¼˜å…ˆé˜Ÿåˆ—ã€‚</p>
<p>ã€Œå»¶è¿Ÿåˆ é™¤ã€ä½¿ç”¨åˆ°çš„è¾…åŠ©æ•°æ®ç»“æ„ä¸€èˆ¬ä¸ºå“ˆå¸Œè¡¨ \textit{delayed}delayedï¼Œå…¶ä¸­çš„æ¯ä¸ªé”®å€¼å¯¹ (\textit{num}, \textit{freq})(num,freq)ï¼Œè¡¨ç¤ºå…ƒç´  \textit{num}num è¿˜éœ€è¦è¢«åˆ é™¤ \textit{freq}freq æ¬¡ã€‚ã€Œä¼˜å…ˆé˜Ÿåˆ— + å»¶è¿Ÿåˆ é™¤ã€æœ‰éå¸¸å¤šç§è®¾è®¡æ–¹å¼ï¼Œä½“ç°åœ¨ã€Œå»¶è¿Ÿåˆ é™¤ã€çš„æ—¶æœºé€‰æ‹©ã€‚åœ¨æœ¬é¢˜è§£ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ç§æ¯”è¾ƒå®¹æ˜“ç¼–å†™ä»£ç çš„è®¾è®¡æ–¹å¼ï¼Œå³ï¼š</p>
<p>æˆ‘ä»¬ä¿è¯åœ¨ä»»æ„æ“ä½œ \texttt{insert(num)}insert(num)ï¼Œ\texttt{erase(num)}erase(num)ï¼Œ\texttt{getMedian()}getMedian() å®Œæˆä¹‹åï¼ˆæˆ–è€…è¯´ä»»æ„æ“ä½œå¼€å§‹ä¹‹å‰ï¼‰ï¼Œ\textit{small}small å’Œ \textit{large}large çš„å †é¡¶å…ƒç´ éƒ½æ˜¯ä¸éœ€è¦è¢«ã€Œå»¶è¿Ÿåˆ é™¤ã€çš„ã€‚è¿™æ ·è®¾è®¡çš„å¥½å¤„åœ¨äºï¼šæˆ‘ä»¬æ— éœ€æ›´æ”¹ \texttt{getMedian()}getMedian() çš„è®¾è®¡ï¼Œåªéœ€è¦ç•¥åŠ ä¿®æ”¹ \texttt{insert(num)}insert(num) å³å¯ã€‚</p>
<p>æˆ‘ä»¬é¦–å…ˆè®¾è®¡ä¸€ä¸ªè¾…åŠ©å‡½æ•° \texttt{prune(heap)}prune(heap)ï¼Œå®ƒçš„ä½œç”¨å¾ˆç®€å•ï¼Œå°±æ˜¯å¯¹ \textit{heap}heap è¿™ä¸ªä¼˜å…ˆé˜Ÿåˆ—ï¼ˆ\textit{small}small æˆ–è€… \textit{large}large ä¹‹ä¸€ï¼‰ï¼Œä¸æ–­åœ°å¼¹å‡ºå…¶éœ€è¦è¢«åˆ é™¤çš„å †é¡¶å…ƒç´ ï¼Œå¹¶ä¸”å‡å°‘ \textit{delayed}delayed ä¸­å¯¹åº”é¡¹çš„å€¼ã€‚åœ¨ \texttt{prune(heap)}prune(heap) å®Œæˆä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥ä¿è¯ \textit{heap}heap çš„å †é¡¶å…ƒç´ æ˜¯ä¸éœ€è¦è¢«ã€Œå»¶è¿Ÿåˆ é™¤ã€çš„ã€‚</p>
<p>è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨ \texttt{prune(heap)}prune(heap) çš„åŸºç¡€ä¸Šè®¾è®¡å¦ä¸€ä¸ªè¾…åŠ©å‡½æ•° \texttt{makeBalance()}makeBalance()ï¼Œå®ƒçš„ä½œç”¨å³ä¸ºè°ƒæ•´ \textit{small}small å’Œ \textit{large}large ä¸­çš„å…ƒç´ ä¸ªæ•°ï¼Œä½¿å¾—äºŒè€…çš„å…ƒç´ ä¸ªæ•°æ»¡è¶³è¦æ±‚ã€‚ç”±äºæœ‰äº† \texttt{erase(num)}erase(num) ä»¥åŠã€Œå»¶è¿Ÿåˆ é™¤ã€ï¼Œæˆ‘ä»¬åœ¨å°†ä¸€ä¸ªä¼˜å…ˆé˜Ÿåˆ—çš„å †é¡¶å…ƒç´ æ”¾å…¥å¦ä¸€ä¸ªä¼˜å…ˆé˜Ÿåˆ—æ—¶ï¼Œç¬¬ä¸€ä¸ªä¼˜å…ˆé˜Ÿåˆ—çš„å †é¡¶å…ƒç´ å¯èƒ½æ˜¯éœ€è¦åˆ é™¤çš„ã€‚å› æ­¤æˆ‘ä»¬å°±å¯ä»¥ç”¨ \texttt{makeBalance()}makeBalance() å°† \texttt{prune(heap)}prune(heap) å°è£…èµ·æ¥ï¼Œå®ƒçš„é€»è¾‘å¦‚ä¸‹ï¼š</p>
<p>å¦‚æœ \textit{small}small å’Œ \textit{large}large ä¸­çš„å…ƒç´ ä¸ªæ•°æ»¡è¶³è¦æ±‚ï¼Œåˆ™ä¸è¿›è¡Œä»»ä½•æ“ä½œï¼›</p>
<p>å¦‚æœ \textit{small}small æ¯” \textit{large}large çš„å…ƒç´ ä¸ªæ•°å¤šäº† 22 ä¸ªï¼Œé‚£ä¹ˆæˆ‘ä»¬æˆ‘ä»¬å°† \textit{small}small çš„å †é¡¶å…ƒç´ æ”¾å…¥ \textit{large}largeã€‚æ­¤æ—¶ \textit{small}small çš„å¯¹åº”å…ƒç´ å¯èƒ½æ˜¯éœ€è¦åˆ é™¤çš„ï¼Œå› æ­¤æˆ‘ä»¬è°ƒç”¨ \texttt{prune(small)}prune(small)ï¼›</p>
<p>å¦‚æœ \textit{small}small æ¯” \textit{large}large çš„å…ƒç´ ä¸ªæ•°å°‘äº† 11 ä¸ªï¼Œé‚£ä¹ˆæˆ‘ä»¬å°† \textit{large}large çš„å †é¡¶å…ƒç´ æ”¾å…¥ \textit{small}smallã€‚æ­¤æ—¶ \textit{large}large çš„å¯¹åº”çš„å…ƒç´ å¯èƒ½æ˜¯éœ€è¦åˆ é™¤çš„ï¼Œå› æ­¤æˆ‘ä»¬è°ƒç”¨ \texttt{prune(large)}prune(large)ã€‚</p>
<p>æ­¤æ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨åŸå…ˆ \texttt{insert(num)}insert(num) çš„è®¾è®¡çš„æœ€ååŠ ä¸Šä¸€æ­¥ \texttt{makeBalance()}makeBalance() å³å¯ã€‚ç„¶è€Œå¯¹äº \texttt{erase(num)}erase(num)ï¼Œæˆ‘ä»¬è¿˜æ˜¯éœ€è¦è¿›è¡Œä¸€äº›æ€è€ƒçš„ï¼š</p>
<p>å¦‚æœ \textit{num}num ä¸ \textit{small}small å’Œ \textit{large}large çš„å †é¡¶å…ƒç´ éƒ½ä¸ç›¸åŒï¼Œé‚£ä¹ˆ \textit{num}num æ˜¯éœ€è¦è¢«ã€Œå»¶è¿Ÿåˆ é™¤ã€çš„ï¼Œæˆ‘ä»¬å°†å…¶åœ¨å“ˆå¸Œè¡¨ä¸­çš„å€¼å¢åŠ  11ï¼›</p>
<p>å¦åˆ™ï¼Œä¾‹å¦‚ \textit{num}num ä¸ \textit{small}small çš„å †é¡¶å…ƒç´ ç›¸åŒï¼Œé‚£ä¹ˆè¯¥å…ƒç´ æ˜¯å¯ä»¥ç†è§£è¢«åˆ é™¤çš„ã€‚è™½ç„¶æˆ‘ä»¬æ²¡æœ‰å®ç°ã€Œç«‹å³åˆ é™¤ã€è¿™ä¸ªè¾…åŠ©å‡½æ•°ï¼Œä½†åªè¦æˆ‘ä»¬å°† \textit{num}num åœ¨å“ˆå¸Œè¡¨ä¸­çš„å€¼å¢åŠ  11ï¼Œå¹¶ä¸”è°ƒç”¨ã€Œå»¶è¿Ÿåˆ é™¤ã€çš„è¾…åŠ©å‡½æ•° \texttt{prune(small)}prune(small)ï¼Œé‚£ä¹ˆå°±ç›¸å½“äºå®ç°äº†ã€Œç«‹å³åˆ é™¤ã€çš„åŠŸèƒ½ã€‚</p>
<p>æ— è®ºæ˜¯ã€Œç«‹å³åˆ é™¤ã€è¿˜æ˜¯ã€Œå»¶è¿Ÿåˆ é™¤ã€ï¼Œå…¶ä¸­ä¸€ä¸ªä¼˜å…ˆé˜Ÿåˆ—ä¸­çš„å…ƒç´ ä¸ªæ•°å‘ç”Ÿäº†å˜åŒ–ï¼ˆå‡å°‘äº† 11ï¼‰ï¼Œå› æ­¤æˆ‘ä»¬è¿˜éœ€è¦ç”¨ \texttt{makeBalance()}makeBalance() è°ƒæ•´å…ƒç´ çš„ä¸ªæ•°ã€‚</p>
<p>æ­¤æ—¶ï¼Œæ‰€æœ‰çš„æ¥å£éƒ½å·²ç»è®¾è®¡å®Œæˆäº†ã€‚ç”±äº \texttt{insert(num)}insert(num) å’Œ \texttt{erase(num)}erase(num) çš„æœ€åä¸€æ­¥éƒ½æ˜¯ \texttt{makeBalance()}makeBalance()ï¼Œè€Œ \texttt{makeBalance()}makeBalance() çš„æœ€åä¸€æ­¥æ˜¯ \texttt{prune(heap)}prune(heap)ï¼Œå› æ­¤æˆ‘ä»¬å°±ä¿è¯äº†ä»»æ„æ“ä½œå®Œæˆä¹‹åï¼Œ\textit{small}small å’Œ \textit{large}large çš„å †é¡¶å…ƒç´ éƒ½æ˜¯ä¸éœ€è¦è¢«ã€Œå»¶è¿Ÿåˆ é™¤ã€çš„ã€‚</p>
<p>å…·ä½“å®ç°çš„ç»†èŠ‚ç›¸å¯¹è¾ƒå¤šï¼Œè¯»è€…å¯ä»¥å‚è€ƒä¸‹é¢çš„ä»£ç å’Œæ³¨é‡Šè¿›ä¸€æ­¥ç†è§£ã€‚</p>
<p>ä»£ç </p>
<p>C++JavaPython3GolangC</p>
<p>class DualHeap {<br>private:<br>    // å¤§æ ¹å †ï¼Œç»´æŠ¤è¾ƒå°çš„ä¸€åŠå…ƒç´ <br>    priority_queue<int> small;<br>    // å°æ ¹å †ï¼Œç»´æŠ¤è¾ƒå¤§çš„ä¸€åŠå…ƒç´ <br>    priority_queue<int, vector<int>, greater<int>&gt; large;<br>    // å“ˆå¸Œè¡¨ï¼Œè®°å½•ã€Œå»¶è¿Ÿåˆ é™¤ã€çš„å…ƒç´ ï¼Œkey ä¸ºå…ƒç´ ï¼Œvalue ä¸ºéœ€è¦åˆ é™¤çš„æ¬¡æ•°<br>    unordered_map<int, int> delayed;</p>
<pre><code>int k;
// small å’Œ large å½“å‰åŒ…å«çš„å…ƒç´ ä¸ªæ•°ï¼Œéœ€è¦æ‰£é™¤è¢«ã€Œå»¶è¿Ÿåˆ é™¤ã€çš„å…ƒç´ 
int smallSize, largeSize;
</code></pre><p>public:<br>    DualHeap(int _k): k(_k), smallSize(0), largeSize(0) {}</p>
<p>private:<br>    // ä¸æ–­åœ°å¼¹å‡º heap çš„å †é¡¶å…ƒç´ ï¼Œå¹¶ä¸”æ›´æ–°å“ˆå¸Œè¡¨<br>    template<typename T><br>    void prune(T&amp; heap) {<br>        while (!heap.empty()) {<br>            int num = heap.top();<br>            if (delayed.count(num)) {<br>                â€”delayed[num];<br>                if (!delayed[num]) {<br>                    delayed.erase(num);<br>                }<br>                heap.pop();<br>            }<br>            else {<br>                break;<br>            }<br>        }<br>    }</p>
<pre><code>// è°ƒæ•´ small å’Œ large ä¸­çš„å…ƒç´ ä¸ªæ•°ï¼Œä½¿å¾—äºŒè€…çš„å…ƒç´ ä¸ªæ•°æ»¡è¶³è¦æ±‚
void makeBalance() &#123;
    if (smallSize &gt; largeSize + 1) &#123;
        // small æ¯” large å…ƒç´ å¤š 2 ä¸ª
        large.push(small.top());
        small.pop();
        --smallSize;
        ++largeSize;
        // small å †é¡¶å…ƒç´ è¢«ç§»é™¤ï¼Œéœ€è¦è¿›è¡Œ prune
        prune(small);
    &#125;
    else if (smallSize &lt; largeSize) &#123;
        // large æ¯” small å…ƒç´ å¤š 1 ä¸ª
        small.push(large.top());
        large.pop();
        ++smallSize;
        --largeSize;
        // large å †é¡¶å…ƒç´ è¢«ç§»é™¤ï¼Œéœ€è¦è¿›è¡Œ prune
        prune(large);
    &#125;
&#125;
</code></pre><p>public:<br>    void insert(int num) {<br>        if (small.empty() || num &lt;= small.top()) {<br>            small.push(num);<br>            ++smallSize;<br>        }<br>        else {<br>            large.push(num);<br>            ++largeSize;<br>        }<br>        makeBalance();<br>    }</p>
<pre><code>void erase(int num) &#123;
    ++delayed[num];
    if (num &lt;= small.top()) &#123;
        --smallSize;
        if (num == small.top()) &#123;
            prune(small);
        &#125;
    &#125;
    else &#123;
        --largeSize;
        if (num == large.top()) &#123;
            prune(large);
        &#125;
    &#125;
    makeBalance();
&#125;

double getMedian() &#123;
    return k &amp; 1 ? small.top() : ((double)small.top() + large.top()) / 2;
&#125;
</code></pre><p>};</p>
<p>class Solution {<br>public:<br>    vector<double> medianSlidingWindow(vector<int>&amp; nums, int k) {<br>        DualHeap dh(k);<br>        for (int i = 0; i &lt; k; ++i) {<br>            dh.insert(nums[i]);<br>        }<br>        vector<double> ans = {dh.getMedian()};<br>        for (int i = k; i &lt; nums.size(); ++i) {<br>            dh.insert(nums[i]);<br>            dh.erase(nums[i - k]);<br>            ans.push_back(dh.getMedian());<br>        }<br>        return ans;<br>    }<br>};<br>å¤æ‚åº¦åˆ†æ</p>
<p>ç”±äºã€Œå»¶è¿Ÿåˆ é™¤ã€çš„å­˜åœ¨ï¼Œ\textit{small}small æ¯” \textit{large}large åœ¨æœ€åæƒ…å†µä¸‹å¯èƒ½åŒ…å«æ‰€æœ‰çš„ nn ä¸ªå…ƒç´ ï¼Œå³æ²¡æœ‰ä¸€ä¸ªå…ƒç´ è¢«çœŸæ­£åˆ é™¤äº†ã€‚å› æ­¤ä¼˜å…ˆé˜Ÿåˆ—çš„å¤§å°æ˜¯ O(n)O(n) è€Œä¸æ˜¯ O(k)O(k) çš„ï¼Œå…¶ä¸­ nn æ˜¯æ•°ç»„ \textit{nums}nums çš„é•¿åº¦ã€‚</p>
<p>æ—¶é—´å¤æ‚åº¦ï¼šO(n\log n)O(nlogn)ã€‚\texttt{insert(num)}insert(num) å’Œ \texttt{erase(num)}erase(num) çš„å•æ¬¡æ—¶é—´å¤æ‚åº¦ä¸º O(\log n)O(logn)ï¼Œ\texttt{getMedian()}getMedian() çš„å•æ¬¡æ—¶é—´å¤æ‚åº¦ä¸º O(1)O(1)ã€‚å› æ­¤æ€»æ—¶é—´å¤æ‚åº¦ä¸º O(n\log n)O(nlogn)ã€‚</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šO(n)O(n)ã€‚å³ä¸º \textit{small}smallï¼Œ\textit{large}large å’Œ \textit{delayed}delayed éœ€è¦ä½¿ç”¨çš„ç©ºé—´ã€‚</p>
<p>ç»“è¯­<br>è¯»è€…å¯ä»¥å°è¯•å›ç­”å¦‚ä¸‹çš„ä¸¤ä¸ªé—®é¢˜æ¥æ£€éªŒè‡ªå·±æ˜¯å¦æŒæ¡äº†è¯¥æ–¹æ³•ï¼š</p>
<p>åœ¨ \texttt{insert(num)}insert(num) çš„æœ€åæˆ‘ä»¬åŠ ä¸Šäº†ä¸€æ­¥ \texttt{makeBalance()}makeBalance()ï¼Œå…¶ä¸­åŒ…æ‹¬å¯èƒ½è¿›è¡Œçš„ \texttt{prune(heap)}prune(heap) æ“ä½œï¼Œè¿™å¯¹äº \texttt{insert(num)}insert(num) æ“ä½œè€Œè¨€æ˜¯å¦æ˜¯å¿…è¦çš„ï¼Ÿ</p>
<p>åœ¨ \texttt{insert(num)}insert(num) çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœæˆ‘ä»¬å°† \texttt{insert(num)}insert(num) æ”¾å…¥äº† \textit{large}large ä¸­ï¼Œå¹¶ä¸” \textit{num}num æ°å¥½å‡ºç°åœ¨ \textit{large}large çš„å †é¡¶ä½ç½®ï¼Œä¸”ä¸¤ä¸ªä¼˜å…ˆé˜Ÿåˆ—çš„å…ƒç´ ä¸ªæ•°æ»¡è¶³è¦æ±‚ï¼Œä¸éœ€è¦è¿›è¡Œè°ƒæ•´ã€‚æ­¤æ—¶ä¼šä¸ä¼šå‡ºç° \textit{num}num æ˜¯ä¸€ä¸ªéœ€è¦è¢«ã€Œå»¶è¿Ÿåˆ é™¤ã€çš„å…ƒç´ çš„æƒ…å†µï¼Œè¿™æ ·å°±ä¸æ»¡è¶³åœ¨ \texttt{insert(num)}insert(num) æ“ä½œå®Œæˆä¹‹å \textit{large}large çš„å †é¡¶æ˜¯ä¸éœ€è¦è¢«ã€Œå»¶è¿Ÿåˆ é™¤ã€çš„è¦æ±‚äº†ï¼Ÿ</p>
<p>ç­”æ¡ˆ</p>
<p>å®é™…ä¸Šæ˜¯ä¸å¿…è¦çš„ã€‚å› ä¸ºåœ¨ \texttt{insert(num)}insert(num) æ“ä½œä¹‹å‰ï¼Œä¸¤ä¸ªä¼˜å…ˆé˜Ÿåˆ—çš„å †é¡¶å…ƒç´ éƒ½æ˜¯ä¸éœ€è¦è¢«åˆ é™¤çš„ï¼Œè€Œæˆ‘ä»¬åªå¯èƒ½ä»é‚£ä¸ªè¢«åŠ å…¥äº†ä¸€ä¸ªå…ƒç´ çš„ä¼˜å…ˆé˜Ÿåˆ—çš„å †é¡¶å…ƒç´ æ”¾å…¥å¦ä¸€ä¸ªä¼˜å…ˆé˜Ÿåˆ—ä¸­ï¼Œå› æ­¤ä¸¤ä¸ªä¼˜å…ˆé˜Ÿåˆ—çš„å †é¡¶å…ƒç´ ä»ç„¶éƒ½æ˜¯ä¸éœ€è¦è¢«åˆ é™¤çš„ã€‚è¿™æ ·å†™åªæ˜¯ä¸ºäº†å°† \texttt{insert(num)}insert(num) å’Œ \texttt{erase(num)}erase(num) æ“ä½œç»Ÿä¸€èµ·æ¥ï¼Œå‡å°‘ä»£ç çš„å†—ä½™ã€‚</p>
<p>ä¸å¯èƒ½ä¼šå‡ºç°è¿™ç§æƒ…å†µï¼Œå‡è®¾å‡ºç°äº†è¿™ç§æƒ…å†µï¼Œé‚£ä¹ˆ \textit{num}num æ˜¾ç„¶ä¸ä¼šç­‰äº \textit{large}large åŸå…ˆçš„å †é¡¶å…ƒç´ ï¼Œå› ä¸º \textit{large}large åŸå…ˆçš„å †é¡¶å…ƒç´ ä¸€å®šæ˜¯ä¸éœ€è¦è¢«åˆ é™¤çš„ã€‚é‚£ä¹ˆ \textit{num}num æ»¡è¶³ï¼š</p>
<p>\textit{small} ~çš„å †é¡¶å…ƒç´  &lt; \textit{num} &lt; \textit{large} ~çš„å †é¡¶å…ƒç´ <br>small çš„å †é¡¶å…ƒç´ &lt;num&lt;large çš„å †é¡¶å…ƒç´ </p>
<p>ç”±äº \textit{small}small æ˜¯å¤§æ ¹å †ï¼Œ\textit{large}large æ˜¯å°æ ¹å †ï¼Œå› æ­¤æ ¹æœ¬å°±ä¸å­˜åœ¨ä¸ \textit{num}num å€¼ç›¸åŒçš„å…ƒç´ ï¼Œä¹Ÿå°±ä¸å¯èƒ½ä¼šè¢«å»¶è¿Ÿåˆ é™¤äº†ã€‚</p>
<hr>
<h2 id="æŸ±çŠ¶å›¾ä¸­æœ€å¤§çŸ©å½¢ï¼ˆHardï¼‰"><a href="#æŸ±çŠ¶å›¾ä¸­æœ€å¤§çŸ©å½¢ï¼ˆHardï¼‰" class="headerlink" title="æŸ±çŠ¶å›¾ä¸­æœ€å¤§çŸ©å½¢ï¼ˆHardï¼‰"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/largest-rectangle-in-histogram/">æŸ±çŠ¶å›¾ä¸­æœ€å¤§çŸ©å½¢ï¼ˆHardï¼‰</a></h2><p>ç»™å®š n ä¸ªéè´Ÿæ•´æ•°ï¼Œç”¨æ¥è¡¨ç¤ºæŸ±çŠ¶å›¾ä¸­å„ä¸ªæŸ±å­çš„é«˜åº¦ã€‚æ¯ä¸ªæŸ±å­å½¼æ­¤ç›¸é‚»ï¼Œä¸”å®½åº¦ä¸º 1 ã€‚</p>
<p>æ±‚åœ¨è¯¥æŸ±çŠ¶å›¾ä¸­ï¼Œèƒ½å¤Ÿå‹¾å‹’å‡ºæ¥çš„çŸ©å½¢çš„æœ€å¤§é¢ç§¯ã€‚</p>
<p> <img src="\img\histogram.png" srcset="/img/loading.gif" alt="img"></p>
<p>ä»¥ä¸Šæ˜¯æŸ±çŠ¶å›¾çš„ç¤ºä¾‹ï¼Œå…¶ä¸­æ¯ä¸ªæŸ±å­çš„å®½åº¦ä¸º 1ï¼Œç»™å®šçš„é«˜åº¦ä¸º [2,1,5,6,2,3]ã€‚</p>
<p><img src="https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2018/10/12/histogram_area.png" srcset="/img/loading.gif" alt="img"></p>
<p>å›¾ä¸­é˜´å½±éƒ¨åˆ†ä¸ºæ‰€èƒ½å‹¾å‹’å‡ºçš„æœ€å¤§çŸ©å½¢é¢ç§¯ï¼Œå…¶é¢ç§¯ä¸º 10 ä¸ªå•ä½ã€‚</p>
<p><strong>ç¤ºä¾‹:</strong></p>
<pre><code class="hljs angelscript">è¾“å…¥: [<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]
è¾“å‡º: <span class="hljs-number">10</span></code></pre>
<hr>
<p>è¿™é“é¢˜æ— è®ºæ˜¯æš´åŠ›è¿˜æ˜¯æšä¸¾å‡ä¼šè¶…æ—¶ï¼ˆæ—¶é—´å¤æ‚åº¦$O(N^2)$ï¼‰ï¼Œæœ€åˆçš„æƒ³æ³•æ˜¯ç”¨ä¸€ä¸ªå“ˆå¸Œè¡¨å­˜<code>heights</code>ä¸­æ¯ä¸€ä¸ªé«˜åº¦ã€Œæœ€é•¿çš„æ¨ªå‘è·ç¦»ã€ï¼Œæœ€å¤§é¢ç§¯ç­‰äº<code>max(maxArea,heights[i]Ã—len)</code>åæ¥å‘ç°è¿‡äºéº»çƒ¦ã€‚ä½†æ˜¯ç›´è§‰å‘Šè¯‰æˆ‘è¿™æ˜¯å¯è¡Œçš„ï¼Œé¢˜è§£é‡‡ç”¨å•è°ƒæ ˆä¹ŸéªŒè¯äº†æˆ‘çš„æƒ³æ³•ã€‚</p>
<p>æœ‰ä¸€ä¸ª<em>äº‹å®</em>éœ€è¦æ³¨æ„ï¼š</p>
<ul>
<li>è‹¥åä¸€ä¸ªé«˜åº¦å°äºå‰ä¸€ä¸ªé«˜åº¦ï¼Œé‚£ä¹ˆå‰ä¸€ä¸ªé«˜åº¦å°†ä¸ä¼šå¯¹åç»­çš„æ±‚æœ€å¤§é¢ç§¯æ“ä½œäº§ç”Ÿå½±å“ã€‚</li>
</ul>
<p>æˆ‘ä»¬éœ€è¦å¯¹$i$å·¦å³è¿›è¡Œæ‰©å±•ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°<strong>å·¦å³ä¸¤ä¾§æœ€è¿‘ä¸”é«˜åº¦å°äº$h$çš„æŸ±å­ï¼Œè¿™å’Œæ¥é›¨æ°´é‚£ä¸€é¢˜éå¸¸ç›¸ä¼¼</strong>ã€‚ä»¥</p>
<p>$[6,7,5,2,4,5,9,3]$ä¸ºä¾‹ï¼Œ</p>
<ol>
<li>å°†6å…¥æ ˆï¼Œ6å·¦ä¾§ä¸ºå“¨å…µï¼Œä½ç½®-1ï¼›</li>
<li>å°†7å…¥æ ˆï¼Œç”±äº7&gt;6ï¼Œæ•…7ä¸ä¼šè¢«ç§»é™¤ï¼›</li>
<li>å°†5å…¥æ ˆï¼Œç”±äº7&gt;5ä¸”6&gt;5ï¼Œæ•…6ï¼Œ7ä¼šè¢«ç§»é™¤ã€‚æ­¤æ—¶æ ˆä¸ºç©ºï¼Œ5å·¦ä¾§ä¸ºå“¨å…µï¼Œä½ç½®-1.</li>
<li>å°†2å…¥æ ˆï¼Œç”±äº2&lt;5ï¼Œ5ä¼šè¢«ç§»é™¤ï¼Œ2å·¦ä¾§ä¸ºå“¨å…µ-1.</li>
<li>å°†4å…¥æ ˆ</li>
<li>å°†5å…¥æ ˆ</li>
<li>å°†9å…¥æ ˆ</li>
<li>ä¸æ–­å‡ºæ ˆç›´åˆ°é‡åˆ°2&lt;3</li>
</ol>
<script type="math/tex; mode=display">
\begin{array}\\
1.[6(0)]\\
2.[6(0),7(1)]\\
3.[5(2)]\\
4.[2(3)]\\
5.[2(3),4(4)]\\
6.[2(3),4(4),5(5)]\\
7.[2(3),4(4),5(5),9(6)]\\
8.[2(3),3(7)]
\end{array}</script><p>è¿™æ ·ä»¥æ¥æˆ‘ä»¬å¾—åˆ°å·¦ä¾§æŸ±å­çš„ç¼–å·ä¸º$[-1,0,-1,-1,3,4,5,3]$ï¼ŒåŒæ ·åœ°ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°å³ä¾§æŸ±å­çš„ç¼–å·$[2,2,3,8,7,7,7,8]$ã€‚  å› è€Œæ ¹æ®$(l_height-r_height-1)*height[i]$å¾—åˆ°æœ€å¤§é¢ç§¯ã€‚</p>
<p>ä»£ç å¦‚ä¸‹ï¼š</p>
<p>â€‹     </p>
<pre><code class="hljs C++"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> &#123;</span>
<span class="hljs-keyword">public</span>:
    
    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">largestRectangleArea</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; heights)</span> </span>&#123;
     <span class="hljs-keyword">if</span>(!heights.size()) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
     <span class="hljs-keyword">int</span> n = heights.size();
     <span class="hljs-keyword">int</span> maxArea = INT32_MIN;
    <span class="hljs-comment">//é‡‡ç”¨å•è°ƒæ ˆçš„æ€æƒ³ï¼Œåˆ†åˆ«æ‰¾åˆ°iå·¦å³ä¸¤ä¾§æœ€è¿‘ä¸”é«˜åº¦å°äºhçš„æŸ±å­</span>
    vector&lt;int&gt; lbound(n,0),rbound(n,0);
    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">pair</span>&lt;<span class="hljs-keyword">int</span>,<span class="hljs-keyword">int</span>&gt;&gt; lstack,rstack;<span class="hljs-comment">//å­˜æ”¾é«˜åº¦ä½ç½®å’Œä¸‹æ ‡</span>
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n;i++)
    &#123;
        <span class="hljs-keyword">if</span>(lstack.empty()) lbound[i] = <span class="hljs-number">-1</span>;<span class="hljs-comment">//å“¨å…µ </span>
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(heights[i] &gt; lstack.back().first) 
        &#123;
            lbound[i] = lstack.back().second;
        &#125;<span class="hljs-keyword">else</span>
        &#123;
            <span class="hljs-keyword">while</span>(!lstack.empty()&amp;&amp;heights[i]&lt;=lstack.back().first)lstack.pop_back();
            <span class="hljs-keyword">if</span>(lstack.empty()) lbound[i] = <span class="hljs-number">-1</span>;
            <span class="hljs-keyword">else</span> lbound[i] = lstack.back().second;
        &#125;
        lstack.push_back(&#123;heights[i],i&#125;);
        
    &#125;
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = n<span class="hljs-number">-1</span>; j &gt;= <span class="hljs-number">0</span>;j--)
    &#123;
        <span class="hljs-keyword">if</span>(rstack.empty()) rbound[j] = n;<span class="hljs-comment">//å“¨å…µ </span>
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(heights[j] &gt; rstack.back().first) 
        &#123;
            rbound[j] = rstack.back().second;
        &#125;<span class="hljs-keyword">else</span>
        &#123;
            <span class="hljs-keyword">while</span>(!rstack.empty()&amp;&amp;heights[j]&lt;=rstack.back().first) rstack.pop_back();
            <span class="hljs-keyword">if</span>(rstack.empty()) rbound[j] = n;
            <span class="hljs-keyword">else</span> rbound[j] = rstack.back().second;
        &#125;
        rstack.push_back(&#123;heights[j],j&#125;);
        
    &#125;
    <span class="hljs-comment">// for(auto &amp;c:lbound)</span>
    <span class="hljs-comment">// printf(&quot;%d,&quot;,c);</span>
    <span class="hljs-comment">// printf(&quot;\n&quot;);</span>
    <span class="hljs-comment">// for(auto &amp;c:rbound)</span>
    <span class="hljs-comment">// printf(&quot;%d,&quot;,c);</span>
    <span class="hljs-comment">// printf(&quot;\n&quot;);</span>
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> c = <span class="hljs-number">0</span>; c &lt; n;c++)
    &#123;
        <span class="hljs-keyword">if</span>(lbound[c]==<span class="hljs-number">-1</span>) maxArea = max(maxArea,rbound[c]*heights[c]);
        <span class="hljs-keyword">else</span> maxArea = max(maxArea,(rbound[c]-lbound[c]<span class="hljs-number">-1</span>)*heights[c]);
    &#125;
    <span class="hljs-keyword">return</span> maxArea&lt;<span class="hljs-number">0</span>?<span class="hljs-number">0</span>:maxArea;
    &#125;
&#125;;
</code></pre>
<p>æ—¶é—´å¤æ‚åº¦ï¼š$O(2N)$</p>
<p>ç©ºé—´å¤æ‚åº¦: $O(4N)$ï¼Œå·¦å³è¾¹ç•Œä»¥åŠæ ˆ</p>
<p>ä½†æ˜¯æ­¤ä»£ç å¯ä»¥ç®€åŒ–ï¼ŒæŠŠå¯»æ‰¾å·¦è¾¹ç•Œå’Œå¯»æ‰¾å³è¾¹ç•Œæ”¾åœ¨ä¸€æ¬¡è¿­ä»£ä¸­å®Œæˆã€‚</p>
<pre><code class="hljs C++"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">largestRectangleArea</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; heights)</span> </span>&#123;
           <span class="hljs-comment">//84æ±‚æŸ±çŠ¶å›¾çš„æœ€å¤§çŸ©å½¢ï¼ŒO(N)</span>
           <span class="hljs-keyword">int</span> n = heights.size();
           vector&lt;int&gt; left(n), right(n, n);
           <span class="hljs-comment">//å·¦å³è¾¹ç•Œæ•°ç»„ï¼Œç»´æŠ¤æ¯ä¸ªçŸ©å½¢çš„æœ€å¤§å·¦å³å®½åº¦</span>
           <span class="hljs-built_in">stack</span>&lt;<span class="hljs-keyword">int</span>&gt; mono_stack;<span class="hljs-comment">//å•è°ƒæ ˆ</span>
           <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i) &#123;

               <span class="hljs-keyword">while</span> (!mono_stack.empty() &amp;&amp; heights[mono_stack.top()] &gt;= heights[i]) &#123;
                   right[mono_stack.top()] = i;
                   mono_stack.pop();
               &#125;
               left[i] = (mono_stack.empty() ? <span class="hljs-number">-1</span> : mono_stack.top());
               mono_stack.push(i);
           &#125;
           
           <span class="hljs-keyword">int</span> ans = <span class="hljs-number">0</span>;
           <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i) &#123;
               ans = max(ans, (right[i] - left[i] - <span class="hljs-number">1</span>) * heights[i]);<span class="hljs-comment">//è®¡ç®—æœ€å¤§é¢ç§¯</span>
           &#125;
           <span class="hljs-keyword">return</span> ans;
       &#125;</code></pre>
<p>å¯èƒ½çœ‹ä»£ç æœ‰äº›å¤æ‚ï¼Œæˆ‘ä»¬åˆ¶ä½œä¸€ä¸ªåŠ¨ç”»æ–¹ä¾¿ç†è§£ï¼š</p>
<p>[åŠ¨ç”»æ­£åœ¨åˆ¶ä½œä¹‹ä¸­ã€‚ã€‚ã€‚]</p>
<hr>
<h2 id="æ¯æ—¥æ¸©åº¦"><a href="#æ¯æ—¥æ¸©åº¦" class="headerlink" title="æ¯æ—¥æ¸©åº¦"></a>æ¯æ—¥æ¸©åº¦</h2><p>è¯·æ ¹æ®æ¯æ—¥ æ°”æ¸© åˆ—è¡¨ï¼Œé‡æ–°ç”Ÿæˆä¸€ä¸ªåˆ—è¡¨ã€‚å¯¹åº”ä½ç½®çš„è¾“å‡ºä¸ºï¼šè¦æƒ³è§‚æµ‹åˆ°æ›´é«˜çš„æ°”æ¸©ï¼Œè‡³å°‘éœ€è¦ç­‰å¾…çš„å¤©æ•°ã€‚å¦‚æœæ°”æ¸©åœ¨è¿™ä¹‹åéƒ½ä¸ä¼šå‡é«˜ï¼Œè¯·åœ¨è¯¥ä½ç½®ç”¨ 0 æ¥ä»£æ›¿ã€‚</p>
<p>ä¾‹å¦‚ï¼Œç»™å®šä¸€ä¸ªåˆ—è¡¨ temperatures = [73, 74, 75, 71, 69, 72, 76, 73]ï¼Œä½ çš„è¾“å‡ºåº”è¯¥æ˜¯ [1, 1, 4, 2, 1, 1, 0, 0]ã€‚</p>
<p>æç¤ºï¼šæ°”æ¸© åˆ—è¡¨é•¿åº¦çš„èŒƒå›´æ˜¯ [1, 30000]ã€‚æ¯ä¸ªæ°”æ¸©çš„å€¼çš„å‡ä¸ºåæ°åº¦ï¼Œéƒ½æ˜¯åœ¨ [30, 100] èŒƒå›´å†…çš„æ•´æ•°ã€‚</p>
<hr>
<p>å¯ä»¥ç»´æŠ¤ä¸€ä¸ªå­˜å‚¨ä¸‹æ ‡çš„å•è°ƒæ ˆï¼Œä»æ ˆåº•åˆ°æ ˆé¡¶çš„ä¸‹æ ‡å¯¹åº”çš„æ¸©åº¦åˆ—è¡¨ä¸­çš„æ¸©åº¦ä¾æ¬¡é€’å‡ã€‚å¦‚æœä¸€ä¸ªä¸‹æ ‡åœ¨å•è°ƒæ ˆé‡Œï¼Œåˆ™è¡¨ç¤ºå°šæœªæ‰¾åˆ°ä¸‹ä¸€æ¬¡æ¸©åº¦æ›´é«˜çš„ä¸‹æ ‡ã€‚</p>
<p>æ­£å‘éå†æ¸©åº¦åˆ—è¡¨ã€‚å¯¹äºæ¸©åº¦åˆ—è¡¨ä¸­çš„æ¯ä¸ªå…ƒç´  T[i]ï¼Œå¦‚æœæ ˆä¸ºç©ºï¼Œåˆ™ç›´æ¥å°† i è¿›æ ˆï¼Œå¦‚æœæ ˆä¸ä¸ºç©ºï¼Œåˆ™æ¯”è¾ƒæ ˆé¡¶å…ƒç´  prevIndex å¯¹åº”çš„æ¸©åº¦ T[prevIndex] å’Œå½“å‰æ¸©åº¦ T[i]ï¼Œå¦‚æœ T[i] &gt; T[prevIndex]ï¼Œåˆ™å°† prevIndex ç§»é™¤ï¼Œå¹¶å°† prevIndex å¯¹åº”çš„ç­‰å¾…å¤©æ•°èµ‹ä¸º i - prevIndexï¼Œé‡å¤ä¸Šè¿°æ“ä½œç›´åˆ°æ ˆä¸ºç©ºæˆ–è€…æ ˆé¡¶å…ƒç´ å¯¹åº”çš„æ¸©åº¦å°äºç­‰äºå½“å‰æ¸©åº¦ï¼Œç„¶åå°† i è¿›æ ˆã€‚</p>
<p>ä¸ºä»€ä¹ˆå¯ä»¥åœ¨å¼¹æ ˆçš„æ—¶å€™æ›´æ–° ans[prevIndex] å‘¢ï¼Ÿå› ä¸ºåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå³å°†è¿›æ ˆçš„ i å¯¹åº”çš„ T[i] ä¸€å®šæ˜¯ T[prevIndex] å³è¾¹ç¬¬ä¸€ä¸ªæ¯”å®ƒå¤§çš„å…ƒç´ ï¼Œè¯•æƒ³å¦‚æœ prevIndex å’Œ i æœ‰æ¯”å®ƒå¤§çš„å…ƒç´ ï¼Œå‡è®¾ä¸‹æ ‡ä¸º jï¼Œé‚£ä¹ˆ prevIndex ä¸€å®šä¼šåœ¨ä¸‹æ ‡ j çš„é‚£ä¸€è½®è¢«å¼¹æ‰ã€‚</p>
<p>ç”±äºå•è°ƒæ ˆæ»¡è¶³ä»æ ˆåº•åˆ°æ ˆé¡¶å…ƒç´ å¯¹åº”çš„æ¸©åº¦é€’å‡ï¼Œå› æ­¤æ¯æ¬¡æœ‰å…ƒç´ è¿›æ ˆæ—¶ï¼Œä¼šå°†æ¸©åº¦æ›´ä½çš„å…ƒç´ å…¨éƒ¨ç§»é™¤ï¼Œå¹¶æ›´æ–°å‡ºæ ˆå…ƒç´ å¯¹åº”çš„ç­‰å¾…å¤©æ•°ï¼Œè¿™æ ·å¯ä»¥ç¡®ä¿ç­‰å¾…å¤©æ•°ä¸€å®šæ˜¯æœ€å°çš„ã€‚</p>
<ul>
<li><p><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼š$O(n)$ï¼Œå…¶ä¸­ næ˜¯æ¸©åº¦åˆ—è¡¨çš„é•¿åº¦ã€‚æ­£å‘éå†æ¸©åº¦åˆ—è¡¨ä¸€éï¼Œå¯¹äºæ¸©åº¦åˆ—è¡¨ä¸­çš„æ¯ä¸ªä¸‹æ ‡ï¼Œæœ€å¤šæœ‰ä¸€æ¬¡è¿›æ ˆå’Œå‡ºæ ˆçš„æ“ä½œã€‚</p>
</li>
<li><p><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼š$O(n)$ï¼Œå…¶ä¸­ n æ˜¯æ¸©åº¦åˆ—è¡¨çš„é•¿åº¦ã€‚éœ€è¦ç»´æŠ¤ä¸€ä¸ªå•è°ƒæ ˆå­˜å‚¨æ¸©åº¦åˆ—è¡¨ä¸­çš„ä¸‹æ ‡ã€‚</p>
</li>
</ul>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/%E7%AE%97%E6%B3%95/">ç®—æ³•</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/%E5%8D%95%E8%B0%83%E6%A0%88/">å•è°ƒæ ˆ</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 åè®®</a> ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼</p>
              
              
                <div class="post-prevnext row">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2020/07/21/2020-7-30-pointers/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">ç¥å¥‡çš„å¤šæŒ‡é’ˆ ã€cover è„‘ç­‹æ€¥è½¬å¼¯ğŸ’¡ã€‘</span>
                        <span class="visible-mobile">ä¸Šä¸€ç¯‡</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2020/07/21/2020-07-21-dynamic-planning/">
                        <span class="hidden-mobile">åŠ¨æ€è§„åˆ’</span>
                        <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
              <!-- Comments -->
              <article class="comments" id="comments">
                
                
  <div id="vcomments"></div>
  <script type="text/javascript">
    function loadValine() {
      addScript('https://cdn.staticfile.org/valine/1.4.14/Valine.min.js', function () {
        new Valine({
          el: "#vcomments",
          app_id: "8oX7VCxy9tyFQIvF8qwLorP0-gzGzoHsz",
          app_key: "F0939INl4cKXpCw2HgTIUb6B",
          placeholder: "è¯´ç‚¹ä»€ä¹ˆ,ï¼ˆæ”¯æŒMarkdownï¼‰",
          path: window.location.pathname,
          avatar: "retro",
          meta: ["nick","mail","link"],
          pageSize: "10",
          lang: "zh-CN",
          highlight: false,
          recordIP: false,
          serverURLs: "https://8ox7vcxy.lc-cn-n1-shared.com",
        });
      });
    }
    waitElementVisible('vcomments', loadValine);
  </script>
  <noscript>Please enable JavaScript to view the <a target="_blank" href="https://valine.js.org" rel="nofollow noopener noopener">comments
      powered by Valine.</a></noscript>


              </article>
            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;ç›®å½•</p>
  <div id="tocbot"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    
  </main>

  
    <a id="scroll-top-button" href="#" role="button">
      <i class="iconfont icon-arrowup" aria-hidden="true"></i>
    </a>
  

  
    <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">å…³é”®è¯</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
  

  

  

  <footer class="mt-5">
  <div class="text-center py-3">
    <div>
      <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a>
      <i class="iconfont icon-love"></i>
      <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener">
        <span>Fluid</span></a>
    </div>
    
  <div class="statistics">
    
    

    
      
        <!-- ä¸è’œå­ç»Ÿè®¡PV -->
        <span id="busuanzi_container_site_pv" style="display: none">
            æ€»è®¿é—®é‡ 
            <span id="busuanzi_value_site_pv"></span>
             æ¬¡
          </span>
      
      
        <!-- ä¸è’œå­ç»Ÿè®¡UV -->
        <span id="busuanzi_container_site_uv" style="display: none">
            æ€»è®¿å®¢æ•° 
            <span id="busuanzi_value_site_uv"></span>
             äºº
          </span>
      
    
  </div>


    

    
  </div>
</footer>

<!-- SCRIPTS -->
<script  src="https://cdn.staticfile.org/jquery/3.4.1/jquery.min.js" ></script>
<script  src="https://cdn.staticfile.org/twitter-bootstrap/4.4.1/js/bootstrap.min.js" ></script>
<script  src="/js/debouncer.js" ></script>
<script  src="/js/main.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/lazyload.js" ></script>
  



  



  <script defer src="https://cdn.staticfile.org/clipboard.js/2.0.6/clipboard.min.js" ></script>
  <script  src="/js/clipboard-use.js" ></script>



  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





  <script  src="https://cdn.staticfile.org/tocbot/4.11.1/tocbot.min.js" ></script>
  <script>
    $(document).ready(function () {
      var boardCtn = $('#board-ctn');
      var boardTop = boardCtn.offset().top;

      tocbot.init({
        tocSelector: '#tocbot',
        contentSelector: '#post-body',
        headingSelector: 'h1,h2,h3,h4,h5,h6',
        linkClass: 'tocbot-link',
        activeLinkClass: 'tocbot-active-link',
        listClass: 'tocbot-list',
        isCollapsedClass: 'tocbot-is-collapsed',
        collapsibleClass: 'tocbot-is-collapsible',
        collapseDepth: 0,
        scrollSmooth: true,
        headingsOffset: -boardTop
      });
      if ($('.toc-list-item').length > 0) {
        $('#toc').css('visibility', 'visible');
      }
    });
  </script>



  <script  src="https://cdn.staticfile.org/typed.js/2.0.11/typed.min.js" ></script>
  <script>
    var typed = new Typed('#subtitle', {
      strings: [
        '  ',
        "çº¢å°˜å®¢æ ˆä¹‹å•è°ƒæ ˆ&nbsp;",
      ],
      cursorChar: "_",
      typeSpeed: 70,
      loop: false,
    });
    typed.stop();
    $(document).ready(function () {
      $(".typed-cursor").addClass("h2");
      typed.start();
    });
  </script>



  <script  src="https://cdn.staticfile.org/anchor-js/4.2.2/anchor.min.js" ></script>
  <script>
    anchors.options = {
      placement: "right",
      visible: "hover",
      
    };
    var el = "h1,h2,h3,h4,h5,h6".split(",");
    var res = [];
    for (item of el) {
      res.push(".markdown-body > " + item)
    }
    anchors.add(res.join(", "))
  </script>



  <script  src="/js/local-search.js" ></script>
  <script>
    var path = "/local-search.xml";
    var inputArea = document.querySelector("#local-search-input");
    inputArea.onclick = function () {
      searchFunc(path, 'local-search-input', 'local-search-result');
      this.onclick = null
    }
  </script>



  <script  src="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.css" />

  <script>
    $('#post img:not(.no-zoom img, img[no-zoom]), img[zoom]').each(
      function () {
        var element = document.createElement('a');
        $(element).attr('data-fancybox', 'images');
        $(element).attr('href', $(this).attr('src'));
        $(this).wrap(element);
      }
    );
  </script>







  
  
    <script>
      !function (e, t, a) {
        function r() {
          for (var e = 0; e < s.length; e++) s[e].alpha <= 0 ? (t.body.removeChild(s[e].el), s.splice(e, 1)) : (s[e].y--, s[e].scale += .004, s[e].alpha -= .013, s[e].el.style.cssText = "left:" + s[e].x + "px;top:" + s[e].y + "px;opacity:" + s[e].alpha + ";transform:scale(" + s[e].scale + "," + s[e].scale + ") rotate(45deg);background:" + s[e].color + ";z-index:99999");
          requestAnimationFrame(r)
        }

        function n() {
          var t = "function" == typeof e.onclick && e.onclick;
          e.onclick = function (e) {
            t && t(), o(e)
          }
        }

        function o(e) {
          var a = t.createElement("div");
          a.className = "heart", s.push({
            el: a,
            x: e.clientX - 5,
            y: e.clientY - 5,
            scale: 1,
            alpha: 1,
            color: c()
          }), t.body.appendChild(a)
        }

        function i(e) {
          var a = t.createElement("style");
          a.type = "text/css";
          try {
            a.appendChild(t.createTextNode(e))
          } catch (t) {
            a.styleSheet.cssText = e
          }
          t.getElementsByTagName("head")[0].appendChild(a)
        }

        function c() {
          return "rgb(" + ~~(255 * Math.random()) + "," + ~~(255 * Math.random()) + "," + ~~(255 * Math.random()) + ")"
        }

        var s = [];
        e.requestAnimationFrame = e.requestAnimationFrame || e.webkitRequestAnimationFrame || e.mozRequestAnimationFrame || e.oRequestAnimationFrame || e.msRequestAnimationFrame || function (e) {
          setTimeout(e, 1e3 / 60)
        }, i(".heart{width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);}.heart:after,.heart:before{content: '';width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: fixed;}.heart:after{top: -5px;}.heart:before{left: -5px;}"), n(), r()
      }(window, document);
    </script>
  








  <script  src="https://cdn.staticfile.org/mermaid/8.5.0/mermaid.min.js" ></script>
  <script>
    if (window.mermaid) {
      mermaid.initialize({"theme":"default"});
    }
  </script>




  

  

  

  

  

  





<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<!--<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>

</body>
</html>
